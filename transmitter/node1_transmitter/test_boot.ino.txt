/*
 * Minimal ESP8266 Boot Test
 * 
 * This sketch helps identify at which point the ESP8266 is resetting.
 * Upload this first to isolate the problem.
 * 
 * Open Serial Monitor at 115200 baud
 */

void setup() {
  Serial.begin(115200);
  delay(2000);
  
  Serial.println();
  Serial.println("=================================");
  Serial.println("ESP8266 BOOT TEST");
  Serial.println("=================================");
  delay(100);
  
  Serial.println("Step 1: Serial OK");
  delay(500);
  
  Serial.println("Step 2: Setting up LED");
  pinMode(LED_BUILTIN, OUTPUT);
  digitalWrite(LED_BUILTIN, HIGH);
  delay(500);
  
  Serial.println("Step 3: Testing D0 (RST)");
  pinMode(D0, OUTPUT);
  digitalWrite(D0, HIGH);
  delay(500);
  
  Serial.println("Step 4: Testing D2 (DIO0)");
  pinMode(D2, INPUT);
  delay(500);
  
  Serial.println("Step 5: Testing D4 (NSS)");
  pinMode(D4, OUTPUT);
  digitalWrite(D4, HIGH);
  delay(500);
  
  Serial.println();
  Serial.println("ALL TESTS PASSED!");
  Serial.println("ESP8266 is stable.");
  Serial.println();
  Serial.println("Next: Check LoRa module connection");
  Serial.println("=================================");
}

void loop() {
  // Blink LED to show it's running
  digitalWrite(LED_BUILTIN, LOW);
  delay(1000);
  digitalWrite(LED_BUILTIN, HIGH);
  delay(1000);
  
  Serial.print(".");
  delay(1000);
}
